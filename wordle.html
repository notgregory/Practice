<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Wordle Clone</title>

  <!-- === Sound Effects === -->
  <audio id="sound-key" src="https://actions.google.com/sounds/v1/cartoon/wood_plank_flicks.ogg"></audio>
  <audio id="sound-correct" src="https://actions.google.com/sounds/v1/cartoon/clang_and_wobble.ogg"></audio>
  <audio id="sound-wrong" src="https://actions.google.com/sounds/v1/alarms/beep_short.ogg"></audio>
  <audio id="sound-win" src="https://actions.google.com/sounds/v1/cartoon/concussive_hit_guitar_boing.ogg"></audio>

  <style>
    :root {
      --bg: #121213;
      --fg: #ffffff;
      --cell-border: #555;
      --correct: #6aaa64;
      --present: #c9b458;
      --absent: #3a3a3c;
      --key-bg: #d3d6da;
      --key-fg: #000;
    }

    body.light {
      --bg: #ffffff;
      --fg: #000000;
      --cell-border: #ccc;
      --key-bg: #e2e2e2;
      --key-fg: #000;
    }

    body {
      font-family: Arial, sans-serif;
      background-color: var(--bg);
      color: var(--fg);
      margin: 0;
      padding: 0.5em;
      text-align: center;
    }

    h1 {
      margin-top: 10px;
    }

    #board {
      display: grid;
      gap: 5px;
      max-width: 90vw;
      margin: 10px auto;
    }

    .row {
      display: flex;
      justify-content: center;
      gap: 5px;
    }

    .cell {
      width: 16vw;
      height: 16vw;
      max-width: 60px;
      max-height: 60px;
      border: 2px solid var(--cell-border);
      font-size: 6vw;
      max-font-size: 24px;
      font-weight: bold;
      line-height: 1;
      display: flex;
      align-items: center;
      justify-content: center;
      background-color: var(--bg);
      color: var(--fg);
      text-transform: uppercase;
      transition: transform 0.3s ease;
    }

    .flip { transform: rotateX(180deg); }
    .correct { background-color: var(--correct); color: white; }
    .present { background-color: var(--present); color: white; }
    .absent  { background-color: var(--absent);  color: white; }

    #keyboard {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 5px;
      max-width: 400px;
      margin: 10px auto;
    }

    #keyboard button {
      min-width: 10vw;
      padding: 10px;
      border: none;
      border-radius: 4px;
      background-color: var(--key-bg);
      color: var(--key-fg);
      font-size: 16px;
      font-weight: bold;
      transition: background-color 0.2s ease;
    }

    input[type="text"] {
      display: none;
    }

    .info, .legend, #message, #definition {
      margin: 10px auto;
      max-width: 90vw;
      font-size: 0.95em;
    }

    .legend .cell {
      display: inline-block;
      width: 25px;
      height: 25px;
      font-size: 16px;
      margin: 0 3px;
    }

    #themeToggle {
      position: absolute;
      top: 10px;
      right: 10px;
    }

    @media (min-width: 500px) {
      .cell { font-size: 24px; }
    }
  </style>
</head>

<body class="dark">
  <button id="themeToggle">ðŸŒ— Toggle Theme</button>

  <h1>Mini Wordle</h1>
  <p>Guess the 5-letter word!</p>

  <div id="board"></div>
  <input type="text" id="guess" maxlength="5" autofocus>
  <p id="message"></p>

  <div id="keyboard"></div>

  <div class="legend">
    <span class="cell correct">A</span> Correct<br>
    <span class="cell present">A</span> In word, wrong spot<br>
    <span class="cell absent">A</span> Not in word
  </div>

  <div id="definition" class="info"></div>

  <script>
    // === Play a sound helper ===
    function playSound(id) {
      const sound = document.getElementById(id);
      if (sound) {
        sound.currentTime = 0;
        sound.play();
      }
    }

    // === Load a random word from a public word list ===
    let solution = "CRANE"; // fallback
    fetch("https://raw.githubusercontent.com/tabatkins/wordle-list/main/words")
      .then(res => res.text())
      .then(text => {
        const words = text.trim().split("\n").filter(w => w.length === 5);
        solution = words[Math.floor(Math.random() * words.length)].toUpperCase();
      })
      .catch(err => {
        console.error("Word fetch failed, using fallback:", err);
      });
          const maxAttempts = 6;
    let attempts = 0;

    const board = document.getElementById("board");
    const keyboard = document.getElementById("keyboard");
    const message = document.getElementById("message");
    const definitionBox = document.getElementById("definition");

    // === Theme toggle logic ===
    document.getElementById("themeToggle").onclick = () => {
      document.body.classList.toggle("light");
    };

    // === Evaluate guess ===
    function evaluateGuess(guess) {
      const result = Array(5).fill("absent");
      const solutionLetters = solution.split("");

      for (let i = 0; i < 5; i++) {
        if (guess[i] === solution[i]) {
          result[i] = "correct";
          solutionLetters[i] = null;
        }
      }

      for (let i = 0; i < 5; i++) {
        if (result[i] !== "correct" && solutionLetters.includes(guess[i])) {
          result[i] = "present";
          solutionLetters[solutionLetters.indexOf(guess[i])] = null;
        }
      }

      return result;
    }

    // === Create board row ===
    function createRow(guess, result) {
      const row = document.createElement("div");
      row.className = "row";
      for (let i = 0; i < 5; i++) {
        const cell = document.createElement("div");
        cell.className = "cell";
        cell.textContent = guess[i];
        row.appendChild(cell);
        if (result) {
          setTimeout(() => {
            cell.classList.add("flip");
            cell.classList.add(result[i]);
          }, i * 200);
        }
      }
      board.appendChild(row);
    }

    // === Update keyboard colors ===
    function updateKeyboard(guess, result) {
      guess.split("").forEach((letter, i) => {
        const key = document.querySelector(`#keyboard button[data-key="${letter}"]`);
        if (!key) return;
        const current = key.dataset.status;
        if (result[i] === "correct" || (result[i] === "present" && current !== "correct") || (result[i] === "absent" && !current)) {
          key.className = "";
          key.classList.add(result[i]);
          key.dataset.status = result[i];
        }
      });
    }

    // === Check word via dictionary API ===
    async function isRealWord(word) {
      try {
        const res = await fetch(`https://api.dictionaryapi.dev/api/v2/entries/en/${word.toLowerCase()}`);
        return res.ok;
      } catch {
        return false;
      }
    }

    async function getDefinition(word) {
      const res = await fetch(`https://api.dictionaryapi.dev/api/v2/entries/en/${word.toLowerCase()}`);
      if (!res.ok) return null;
      const data = await res.json();
      const def = data[0]?.meanings[0]?.definitions[0]?.definition;
      const ex = data[0]?.meanings[0]?.definitions[0]?.example;
      return { def, ex };
    }

    // === Main submission function ===
    async function submitGuess(guess) {
      if (guess.length !== 5) return;
      guess = guess.toUpperCase();

      const valid = await isRealWord(guess);
      if (!valid) {
        message.textContent = "Not a real word.";
        playSound("sound-wrong");
        return;
      }

      const result = evaluateGuess(guess);
      createRow(guess, result);
      updateKeyboard(guess, result);
      playSound("sound-key");
      attempts++;

      if (guess === solution) {
        message.textContent = "ðŸŽ‰ You got it!";
        playSound("sound-win");
        const def = await getDefinition(solution);
        if (def?.def) {
          definitionBox.innerHTML = `<strong>${solution}</strong>: ${def.def}<br><em>${def.ex || ''}</em>`;
        }
      } else if (attempts >= maxAttempts) {
        playSound("sound-wrong");
        message.textContent = `ðŸ˜¢ Out of tries. The word was ${solution}. Want to try again?`;
        const def = await getDefinition(solution);
        if (def?.def) {
          definitionBox.innerHTML = `<strong>${solution}</strong>: ${def.def}<br><em>${def.ex || ''}</em>`;
        }
        const retry = document.createElement("button");
        retry.textContent = "Play Again";
        retry.onclick = () => window.location.reload();
        message.appendChild(document.createElement("br"));
        message.appendChild(retry);
      }
    }

    // === Virtual keyboard setup ===
    const layout = [
      "QWERTYUIOP",
      "ASDFGHJKL",
      "ZXCVBNM"
    ];

    layout.forEach(row => {
      const rowDiv = document.createElement("div");
      [...row].forEach(letter => {
        const key = document.createElement("button");
        key.textContent = letter;
        key.dataset.key = letter;
        key.onclick = () => {
          const currentInput = document.getElementById("guess");
          if (currentInput.value.length < 5) {
            currentInput.value += letter;
            playSound("sound-key");
          }
        };
        rowDiv.appendChild(key);
      });
      keyboard.appendChild(rowDiv);
    });

    // Enter and Backspace keys
    const enterKey = document.createElement("button");
    enterKey.textContent = "Enter";
    enterKey.onclick = () => {
      const input = document.getElementById("guess");
      submitGuess(input.value);
      input.value = "";
    };
    keyboard.appendChild(enterKey);

    const backspace = document.createElement("button");
    backspace.textContent = "âŒ«";
    backspace.onclick = () => {
      const input = document.getElementById("guess");
      input.value = input.value.slice(0, -1);
    };
    keyboard.appendChild(backspace);
  </script>
</body>
</html>
      